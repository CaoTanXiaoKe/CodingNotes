# C++ 中的基本函数



#### 1. 析构函数

在释放掉对象时，释放掉对象所占用的资源。

**调用时机一般是**：一般在对象生命周期过期时，调用delete或delete[]主动释放函数资源。

**默认情况下**，如果用户不自定义析构函数，编译器会默认生成一个public且inline的析构函数。

**执行行为：** 默认情况下，执行对象各个成员的析构函数，释放资源。如果有父类的话，执行完子类各个成员的析构函数，及用户自定义析构函数代码后，执行父类的析构函数，释放子类中父类成员的资源。

**注意事项：** 

- 如果类的方法里有virtual函数，把析构函数也定义为virtual函数。
- 在析构函数里不要调用virtual函数。
- 在析构函数里不要抛出异常。



#### 2. 构造函数

创建一个对象时，为对象分配内存空间，以及初始化各成员。

**调用时机：** 显式的创建一个对象时。

**默认情况：** 如果用户没有自定义任何构造函数，编译器将默认生成一个default构造函数。

**执行行为：** 如果存在父类，调用父类各个成员的构造函数构造父类各个成员，然后调用子类各个成员的构造函数，构造子类成员，最后构造函数代码。C++中规定，对象的成员变量的初始化动作发生在进入构造函数本体之前。 因此构造函数最好使用成员初始化列表（member initialization list），而不要在构造函数本体内使用赋值操作(assignment). 初值列表列出的成员变量，其排列次序应该和它们在class中声明次序相同。有些情况则必须使用成员初始化列表进行初始化，调用基类的构造函数，const成员，引用成员的初始化。

**注意事项：**

- 构造函数里不要调用virtual函数。
- 尽量使用成员初始化列表初始化成员变量。



#### 3. 拷贝构造函数

以一个对象，创建一个新对象。

**调用时机：** 用一个对象初始化一个新对象；传值调用；函数值传递返回。

**默认情况：** 如果用户没有自定义拷贝构造函数，编译器就会默认生成一个拷贝构造函数。

**执行行为：** 默认的拷贝构造函数，只是各个成员的浅拷贝。 和构造函数一样，最好使用成员初始化列表初始化成员。

**注意事项：**

- 拷贝构造函数里不要调用virtual 函数。
- 尽量使用成员初始化列表初始化成员变量。
- 注意深拷贝和浅拷贝的问题。



#### 4. 拷贝赋值函数

以一个对象，赋值给一个已经初始化过的对象。

**调用时机：** 赋值给一个已经初始化过的对象时。

**默认情况：** 如果用户没有自定义拷贝赋值函数，编译器就会默认生成一个拷贝复制函数。

**执行行为：** 调用原来对象的析构函数，然后构造各个成员。



#### 5. 移动构造函数(C++11)

使用临时变量构造新对象。

**调用时机：** 用一个临时对象初始化一个新对象；临时对象传值调用；函数值传递返回。

**默认情况：** 

**执行行为：** std::move

**注意事项：**



资料: https://smartbear.com/blog/develop/c11-tutorial-introducing-the-move-constructor-and/



#### 6. 移动赋值函数(C++11)

使用临时变量赋值给一个已经初始化后的对象。

**调用时机：** 用一个临时对象初始化一个已经初始化过的对象；临时对象传值调用；函数值传递返回。

**默认情况：**

**执行行为：**

**注意事项：**

