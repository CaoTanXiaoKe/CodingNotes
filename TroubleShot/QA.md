#### 1. Q: 服务器上日志太多，删去了之后，空闲磁盘空间怎么还是这么小?

**A**: `df -h` 查看磁盘空间的使用情况，发现空闲磁盘空间没变。很可能是删除的日志文件，正在被某些进程打开打开着的。可以根据该进程pid，使用命令: `lsof -p <pid>` 进行查看。 **原理是**：当文件被被进程打开时，会有一个引用计数记录文件被打开的次数加一。当文件被关闭时，引用计数减一。 当文件被删除时，如果文件被打开的引用计数不等于0，磁盘空间是不会释放的。也因此，很多web服务器都支持reopen操作。



#### 2. Q: Nginx作为后台服务，http回包被截断，只接到一部分内容，然后超时。

**A：** 查看nginx配置文件中 `client_body_temp_path`的配置路径，查看该路径的磁盘空间是否已经被占满。查找nginx的配置方法: 可通过`nginx -t`或`nginx -V`查看配置文件位置，如果nginx未在环境变量中，可通过 `netstat -lanp| grep <端口号>`，找到进程pid, `cat /proc/<pid>/cmdline` 查看nginx的二进制文件位置，执行二进制文件 `./<your-nginx-bin-path> -t`来查看配置文件位置。                                                                                                                                                                                                                                                                                                                                                                                                                                                        


